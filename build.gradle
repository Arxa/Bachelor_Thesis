buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'ca.cutterslade.gradle:gradle-dependency-analyze:1.2.0'
    }
}

apply plugin: 'java'
// Uncomment the following plugin to test for unused libraries
//apply plugin: 'ca.cutterslade.analyze'

apply plugin: 'idea'
apply plugin: 'application'

sourceCompatibility = 1.8
targetCompatibility = 1.8
mainClassName = "Main"

repositories{
    mavenCentral()
    jcenter()
}

jar {
    manifest {
        attributes(
                'Main-Class': 'Main',
        )
    }
}

task fatJar(type: Jar) {
    manifest.from jar.manifest
    classifier = 'all'
    from {
        configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }
    } {
        exclude "META-INF/*.SF"
        exclude "META-INF/*.DSA"
        exclude "META-INF/*.RSA"
    }
    with jar
}

artifacts {
    archives fatJar
}

dependencies {

    // Local Libraries
    compile fileTree('lib')

    compile group: 'org.apache.commons', name: 'commons-io', version: '1.3.2'
    compile group: 'org.bytedeco.javacpp-presets', name: 'tesseract', version: '3.03-rc1-0.11'
    compile group: 'org.bytedeco.javacpp-presets', name: 'tesseract', version: '3.03-rc1-0.11', classifier: 'windows-x86_64'
    compile group: 'org.bytedeco.javacpp-presets', name: 'leptonica', version: '1.71-0.11', classifier: 'windows-x86_64'
    compile group: 'org.languagetool', name: 'language-en', version: '3.8'
    compile group: 'junit', name: 'junit', version: '4.12'

    testCompile group: "org.loadui", name: "testFx", version: "3.1.2"
    testCompile 'org.testfx:testfx-core:4.0.1-alpha'
    testRuntime 'org.testfx:openjfx-monocle:1.8.0_20'
}